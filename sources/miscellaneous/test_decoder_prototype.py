"""A QR code decoder prototype."""

import textwrap

from miscellaneous.decoder_prototype import decode_pixels


def make_testcase_oralb():
    oralb = """
    #######.#.#.##.##.#.#.#######
    #.....#.#...#.####..#.#.....#
    #.###.#.##..##.##..##.#.###.#
    #.###.#...##.##..##.#.#.###.#
    #.###.#...#.#.....#...#.###.#
    #.....#.##..#.##..#.#.#.....#
    #######.#.#eeeeeee#.#.#######
    ........#.#eeeeeee###........
    ..###.#.#.#eeeeeee#.####..###
    #...#..##.#eeeeeee#..##.#..##
    .##.####...eeeeeee.##.....#..
    ...###.####eeeeeee##..#####..
    ##...##....eeeeeee#.##..#.##.
    #......####eeeeeee.##.#.##..#
    .#.#..###..eeeeeee.#...#..#.#
    #.#.#..#.##eeeeeee##.####.###
    ##.##.##.#.eeeeeee#..#.#.....
    ####.....#.eeeeeee##.###.#.#.
    #.#.#.#..##eeeeeee...#....#..
    #.#..#.##..eeeeeee.##.#.##.##
    #.##..#....eeeeeee#.#####..##
    ........#..eeeeeee###...##..#
    #######...#eeeeeee.##.#.####.
    #.....#.......#...###...##.##
    #.###.#.#..#######.######....
    #.###.#.########.##.###.##...
    #.###.#.##.####.###..####.##.
    #.....#..#..#.#..##..#.#.#..#
    #######...##..#..##.#.####...
    """

    lines = [line.strip() for line in textwrap.dedent(oralb.strip()).splitlines()]
    pixels = [ [(c == '#') for c in line] for line in lines]

    return pixels


def make_testcase_lego():
    lego = """
    #######.#.#.#.#.#.#######
    #.....#..#####..#.#.....#
    #.###.#.###..##...#.###.#
    #.###.#.###.#####.#.###.#
    #.###.#.#..##..##.#.###.#
    #.....#.#.##.#....#.....#
    #######.#.#.#.#.#########
    ........#.#.#.###........
    ####..#.#.##..####..###.#
    #.#.#.....#.##..#..#...#.
    ###...#..###.....#.##....
    ###....####.##.##.#..##..
    .##...##.#######.##.#.###
    .#.###...#....#######...#
    .###..###.#..#...###..###
    #.##...#.#.#..####...#..#
    .....##...#..#..#########
    ........######..#...#...#
    #######..#..#...#.#.#####
    #.....#..##.#..##...#...#
    #.###.#....#..#.#####...#
    #.###.#.##.##.##.##.#.###
    #.###.#.#####..#.#######.
    #.....#.####.#.#.##.#.#..
    #######.##...##....######
    """

    lines = [line.strip() for line in textwrap.dedent(lego.strip()).splitlines()]
    pixels = [ [(c == '#') for c in line] for line in lines]

    return pixels


def make_testcase_hello_bye(transpose_flag: bool):
    hello_bye = """
    #######.##..###.#.#######
    #.....#....###.#..#.....#
    #.###.#....###.##.#.###.#
    #.###.#..##.##.##.#.###.#
    #.###.#.#.##...##.#.###.#
    #.....#.##..#..##.#.....#
    #######.#.#.#.#.#.#######
    ........#...##.#.........
    #...######.#.#...####...#
    #..#...#..##..#.###.###..
    ##....#...#.#..#.#...##..
    ....##.##..##....#.#..#..
    #.##..#.#.....#..#.#..###
    ....##.##..####.##...##..
    ....#.#.###.#.##..#.###..
    ...#...####.....#.###.##.
    ..#..###.###.#.######.#..
    ........####....#...###.#
    #######.#.##..#.#.#.#....
    #.....#.#...#..##...###..
    #.###.#.###.#########..##
    #.###.#..#.#.###..##.#..#
    #.###.#..#.####.#.##.#.#.
    #.....#....#..######..##.
    #######.##..#######.##.##
    """

    lines = [line.strip() for line in textwrap.dedent(hello_bye.strip()).splitlines()]
    pixels = [ [(c == '#') for c in line] for line in lines]

    if transpose_flag:
        pixels = [ list(line) for line in zip(*pixels)]

    return pixels


def main():
    #pixels = make_testcase_oralb()
    pixels = make_testcase_lego()
    #pixels = make_testcase_hello_bye(True)

    decode_pixels(pixels)


if __name__ == "__main__":
    main()
